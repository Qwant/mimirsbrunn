name: CI

on:
  push:

jobs:
  rustfmt:
    name: Code Validation
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@master
    - name: Setup rust
      uses: actions-rs/toolchain@v1
      with:
        profile: minimal
        toolchain: 1.54.0
    - name: Check formatting
      run: make format
    - name: Linting
      run: make lint
    - name: Running unit tests and E2E tests
      run: make test

